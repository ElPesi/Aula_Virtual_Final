{% extends "base.html" %}

{% block content %}
<div class="container">
    <h1>Contenido - {{ curso.nombre }}</h1>

    {% if current_user.rol == 'profesor' %}
    <form method="POST" enctype="multipart/form-data">
        <label>Selecciona archivo para subir:</label>
        <input type="file" name="archivo" required>
        <button type="submit">Subir Contenido</button>
    </form>
    <hr>
    {% endif %}

    <h2>Archivos disponibles:</h2>
    <ul>
        {% for archivo in archivos %}
            <li>
                <a href="{{ url_for('static', filename=archivo.ruta) }}" target="_blank">{{ archivo.nombre }}</a>
                {% if current_user.rol == 'profesor' %}
                    <form action="{{ url_for('main.eliminar_archivo', archivo_id=archivo.id) }}" method="POST" style="display:inline;">
                        <button type="submit" onclick="return confirm('¿Seguro que quieres eliminar este archivo?');">Eliminar</button>
                    </form>
                {% endif %}
            </li>
        {% else %}
            <li>No hay archivos subidos aún.</li>
        {% endfor %}
    </ul>

    <hr>
    <h2>Exámenes</h2>
    {% if current_user.rol == 'profesor' %}
        <a href="{{ url_for('main.crear_examen', curso_id=curso.id) }}">➕ Crear nuevo examen</a>
    {% endif %}
    <ul>
        {% for examen in examenes %}
            <li>
                {{ examen.pregunta }}
                {% if current_user.rol == 'alumno' %}
                    <a href="{{ url_for('main.resolver_examen', curso_id=curso.id, examen_id=examen.id) }}">Resolver</a>
                {% endif %}
            </li>
        {% else %}
            <li>No hay exámenes aún.</li>
        {% endfor %}
    </ul>

    <a href="{{ url_for('main.dashboard') }}">Volver al Dashboard</a>
</div>
{% endblock %}
